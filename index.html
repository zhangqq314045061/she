<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
	<title>蛇</title>
</head>
<style>
*{
	padding:0;
	margin:0;
	list-style: none;
}
#sence{
	width:600px;
	height:600px;
	position: absolute;
	margin:auto;
	left:0;
	right:0;
	top:40px;
	border:1px solid #ccc;
	background: #ccc;
	border-bottom: none;
	border-right:none;
	display: none;
}
.q{
	/*margin-left: 20px;
	margin-top:20px;*/
	position: absolute;
	margin:auto;
	left: 50%;
	margin-left:-640px;
	top:20px;
	height:500px;
	width:300px;
	background-image:url(121.jpg);
	float:left;
	padding:30px 100px;
	box-sizing:border-box;
	display: none;
}
ul li{
	display: inline-block;
	padding:10px 30px;
	background: blue;
	font-weight: bold;
	color:#fff;
	opacity: 0.6;
	margin-top:70px;
	cursor: pointer;
	border-radius: 10%;
}
.w{
	position: absolute;
	margin:auto;
	right: 50%;
	margin-right:-640px;
	top:20px;
	height:500px;
	width:300px;
	float:right;
	background-image:url(122.jpg);
	padding:30px 90px;
	box-sizing:border-box;
	display: none;
}
.qwqw{
	display: none;
}
.block{
	width:29px;
	height:29px;
	background: #fff;
	margin-right:1px;
	margin-bottom: 1px;
	float:left;
}
.shiwu{
	background: #546892;
	/*background-repeat: no-repeat;
	background-image:url(qa.png);
	*/

}
.she{
	background:#04ff45;
	/*background-image:url(qq.png);
	background-repeat: no-repeat; */
	
}
.active{
	background: #90f67f;}
	#input{
		outline: none;
		border:0;
		width:100px;
		height:10px;
		border:1px solid #aaaaaa;
		text-align: center; 
		position: absolute;
		left: 50%;  
		top:5px;
	}	
	#input:hover{
		height:30px;
		z-index:2;
		background: #dcc1f1;
		color:red;
	}
	.active{
		background: red;

	}	

	.end{
		width:200px;
		height:172px;
		display: none;
		line-height: 180px;
		text-align: center;
		background-image: url(she/she.png);
        text-shadow:0 0 3px blue;
		position: absolute;
		margin:auto;
		right:0;
		bottom:0;
		left:0;
		top:0;
		font-weight: bold;
		font-family: "微软雅黑";
		color:#333;
		cursor: pointer;
	}





	/*登录*/
	.den{
		z-index: 1;
		height:600px;
		width:600px;
		position: absolute;
		margin:auto;
		left:0;
		top:0;
		bottom: 0;
		right:0;
		background-image:url(21.jpg);
		padding:300px 200px;
		box-sizing:border-box;
		display: block;

	}
	.daq{
		display: inline-block;
		padding:10px 30px;
		cursor: pointer;
		font-weight: bold;
		color: #fff;
		background:#78f345;
		box-shadow:0 0 10px yellow;
		
	}
	.daw{
		background:#78f345;
		padding:10px 30px;
		display: inline-block;
		margin-top: 20px;
		cursor: pointer;
		font-weight: bold;
		box-shadow:0 0 10px yellow;
		color: #fff;

	}
	.jieshao{
		height:500px;
		width:500px;
		position: absolute;
		margin:auto;
		left:0;
		top:0;
		bottom: 0;
		right:0;
		background-image:url(she/jieshao.png);
		padding:140px 70px;
		box-sizing:border-box;
		font-size: 16px;
		border-radius: 10%;
		color:#0742f3;
         text-shadow: 0 0 10px #fff;
		font-weight: bold;
		display: none;
	}
	/*.q li,.w li{
		display:none;
	}*/
</style>
<body>

     <div class="den">
		<div class="daq">游戏介绍</div>
		<div class="daw">进入游戏</div>
	
	<pre class="jieshao">
   一、“贪吃蛇”游戏的玩法
用游戏把子上下左右控制蛇的方向，寻找吃的东西，
每吃一口就能得到一定的积分，而且蛇的身子会越吃
越长，身子越长玩的难度就越大，不能碰墙，不能咬
到自己的身体，更不能咬自己的尾巴，等到了一定的
分数，就能过关，然后继续玩下一关。
   二、“贪吃蛇”游戏的发展
改变此款游戏的特别多。比如在蛋的方面，可能放上
带道具的蛋，使蛇吃完后具有保护，穿墙等特种功能，
而且难度逐渐变难，游戏制作的精细度和画面的质量
也随着版本的提高而不断提高。
<pre>
</div>





	<input placeholder="输入数字" type="text"  id="input">

	<div class="qwqw"></div>
    <div class="q">
    	<ul>
    		<li data-row='15'>15x15</li>
    		<li data-row='20'>20x20</li>
    		<li data-row='30'>30x30</li>
    	</ul>
    </div>
	<div id="sence"></div>
	<div class="w">
		<ul>
			<li data='kaishi'>开始</li>
			<li data='zanting'  class="active">暂停</li>
			<li data='restart'>再开始</li>
		</ul>
	</div>
    


	<div class="end">GAME OVER</div>	
      


	<script src="jquery-1.12.0.js"></script>
	<script>
	$(function(){
		var sence=$('#sence');
		var fangxiang;
		var ss;
		var shiwu=null;
		var she;
		var timerId=null;
		var hang=20;
		var xy=function(x,y){
			return x+'-'+y;
		}
		var huachangjing=function(hang){
			$('#sence').empty();
			var i,j,sence=$('#sence');
			hang=hang||20;
			wh=Math.floor(600/hang);

			for(i=0;i<hang;i++){
				for(j=0;j<hang;j++){
					$('<div>')
    // .empty();
    .addClass('block')
    .attr('id',xy(i,j))
    .width(wh-1)
    .height(wh-1)
    .appendTo($('#sence'));
}
}
sence.width(wh*hang).height(wh*hang);
}
huachangjing();

var shiwu;
var she=[{x:0,y:0},{x:0,y:1},{x:0,y:2}]
she.forEach(function(v){
	$('#'+xy(v.x,v.y)).addClass('she');

})
fangshiwu=function(){
	_x=Math.floor(Math.random()*hang)
	_y=Math.floor(Math.random()*hang)
	$('#'+xy(_x,_y)).addClass('shiwu');
	return{x:_x,y:_y};
}
shiwu=fangshiwu();

move=function(){
	fangxiang=ss||40;
	var jiutou=she[she.length-1];
	if(fangxiang ===39){
		var xintou = {x:jiutou.x,y:jiutou.y+1}

	}else if(fangxiang === 40){
		var xintou = {x:jiutou.x+1,y:jiutou.y}
	}else if(fangxiang === 37){
		var xintou = {x:jiutou.x,y:jiutou.y-1}
	}
	else if(fangxiang === 38){
		var xintou = {x:jiutou.x-1,y:jiutou.y}
	}

	if(xintou.x<0||xintou.x>hang-1||xintou.y<0||xintou.y>hang-1){
		clearInterval(timerId);
		$('.end').css({display:"block"})
		return;
	}
	if(xintou.x===shiwu.x&&xintou.y===shiwu.y){
		she.push(xintou)
		$('#'+xy(xintou.x,xintou.y))
		.addClass('she')
		.removeClass('shiwu')
		shiwu=fangshiwu();
	}else{
		she.push(xintou);
		$('#'+xintou.x+'-'+xintou.y).addClass("she");
		var weiba = she.shift();
		$('#'+weiba.x+'-'+weiba.y).removeClass("she");
	}
}
$('body').bind('keydown',function(e){
	if((Math.abs(e.keyCode-fangxiang))===2){
		clearInterval(timerId);
		$('.end').css({display:"block"})
		return;
	}
	if(e.keyCode<37||e.keyCode>40){
		return;
	}
	ss = e.keyCode		
})
$('.end').bind('click',function(){ 
	sence.empty();
	huachangjing(hang);
	clearInterval(timerId);
	$('.shiwu').removeClass('shiwu');
	she=[{x:0,y:0},{x:0,y:1},{x:0,y:2}]
	she.forEach(function(v){
		$('#'+xy(v.x,v.y)).addClass('she');   
	})
	shiwu=fangshiwu(); 
	ss=40;  
	// $('.q li').css({display:'block'});
	// $('.w li').css({display:'block'});
	$('.end').css({display:"none"})
	timerId=setInterval(move,200);
})



$('li[data]').bind('click',function(){
	$('li.active').removeClass('active');
	$(this).addClass('active');



})
$('li[data-row]').bind('click',function(){
	
	hang=$(this).attr('data-row');
	huachangjing(hang);
	shiwu=fangshiwu();
	she.forEach(function(v){
		$('#'+xy(v.x,v.y)).addClass('she');

	})


})


$('#input').bind('keydown',function(e){
	if(e.keyCode===13){ 
		hang=parseInt($(this).val());
		huachangjing(hang);
		shiwu=fangshiwu();
		she.forEach(function(v){
			$('#'+xy(v.x,v.y)).addClass('she');

		})

	}   })


$('li[data=kaishi]').bind('click',function(){
	clearInterval(timerId);
	timerId=setInterval(move,200);

	// $('.q li').css({display:'none'});
	// $('.w li').css({display:'none'});


})
$('li[data=zanting]').bind('click',function(){
	clearInterval(timerId);
	
})
$('li[data=restart]').bind('click',function(){
	clearInterval(timerId);
	$('.shiwu').removeClass('shiwu');
	$('.she').removeClass('she')
	huachangjing(hang);
	she=[{x:0,y:0},{x:0,y:1},{x:0,y:2}]
	she.forEach(function(v){
		$('#'+xy(v.x,v.y)).addClass('she');
		
	})
	ss=40;
	shiwu=fangshiwu();  
	timerId=setInterval(move,200);
	$('.end').css('display','none');
})





})
// 登录
$('.daq').bind('click',function(){
	$('.jieshao').css({'display':'block'});
})
$('.jieshao').bind('dblclick',function(){
	$('.jieshao').css({'display':'none'});
})
$('.daw').bind('click',function(){
	
	
	$('#sence').css({display:'block'});
	$('.q').css({display:'block'});
	$('.w').css({display:'block'});
	console.log($('.qwqw'));
	$('.den').css({display:'none'});

})








	</script>
</body>
</html>
